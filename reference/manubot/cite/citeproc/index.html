



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.14">
    
    
      
        <title>Citeproc - manubot</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.d3202873.min.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ff0a5ce4.min.css">
      
      
        
        
        <meta name="theme-color" content="#4cae4f">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="lightgreen">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-manubotciteciteproc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../../.." title="manubot" class="md-header-nav__button md-logo" aria-label="manubot">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            manubot
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Citeproc
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/manubot/manubot/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    manubot
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="manubot" class="md-nav__button md-logo" aria-label="manubot">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    manubot
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/manubot/manubot/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    manubot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../LICENSE/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1" checked>
    
    <label class="md-nav__link" for="nav-3-1">
      Manubot
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Manubot" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon"></span>
        Manubot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../command/" title="Command" class="md-nav__link">
      Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../util/" title="Util" class="md-nav__link">
      Util
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-4" type="checkbox" id="nav-3-1-4" checked>
    
    <label class="md-nav__link" for="nav-3-1-4">
      Cite
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Cite" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-4">
        <span class="md-nav__icon md-icon"></span>
        Cite
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../arxiv/" title="Arxiv" class="md-nav__link">
      Arxiv
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../citations/" title="Citations" class="md-nav__link">
      Citations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cite_command/" title="Cite Command" class="md-nav__link">
      Cite Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../citekey/" title="Citekey" class="md-nav__link">
      Citekey
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Citeproc
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Citeproc" class="md-nav__link md-nav__link--active">
      Citeproc
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_jsonschema_csl_validator" class="md-nav__link">
    get_jsonschema_csl_validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_jsonschema_errors" class="md-nav__link">
    remove_jsonschema_errors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../csl_item/" title="Csl Item" class="md-nav__link">
      Csl Item
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../curie/" title="Curie" class="md-nav__link">
      Curie
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../doi/" title="Doi" class="md-nav__link">
      Doi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../handlers/" title="Handlers" class="md-nav__link">
      Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../isbn/" title="Isbn" class="md-nav__link">
      Isbn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pubmed/" title="Pubmed" class="md-nav__link">
      Pubmed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unpaywall/" title="Unpaywall" class="md-nav__link">
      Unpaywall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../url/" title="Url" class="md-nav__link">
      Url
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wikidata/" title="Wikidata" class="md-nav__link">
      Wikidata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../zotero/" title="Zotero" class="md-nav__link">
      Zotero
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-4-17" type="checkbox" id="nav-3-1-4-17">
    
    <label class="md-nav__link" for="nav-3-1-4-17">
      Tests
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tests" data-md-level="4">
      <label class="md-nav__title" for="nav-3-1-4-17">
        <span class="md-nav__icon md-icon"></span>
        Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_arxiv/" title="Test Arxiv" class="md-nav__link">
      Test Arxiv
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_citations/" title="Test Citations" class="md-nav__link">
      Test Citations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_cite_command/" title="Test Cite Command" class="md-nav__link">
      Test Cite Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_citekey/" title="Test Citekey" class="md-nav__link">
      Test Citekey
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_citekey_api/" title="Test Citekey Api" class="md-nav__link">
      Test Citekey Api
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_citeproc/" title="Test Citeproc" class="md-nav__link">
      Test Citeproc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_csl_item/" title="Test Csl Item" class="md-nav__link">
      Test Csl Item
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_curie/" title="Test Curie" class="md-nav__link">
      Test Curie
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_doi/" title="Test Doi" class="md-nav__link">
      Test Doi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_handlers/" title="Test Handlers" class="md-nav__link">
      Test Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_isbn/" title="Test Isbn" class="md-nav__link">
      Test Isbn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_pubmed/" title="Test Pubmed" class="md-nav__link">
      Test Pubmed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_unpaywall/" title="Test Unpaywall" class="md-nav__link">
      Test Unpaywall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_url/" title="Test Url" class="md-nav__link">
      Test Url
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_wikidata/" title="Test Wikidata" class="md-nav__link">
      Test Wikidata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/test_zotero/" title="Test Zotero" class="md-nav__link">
      Test Zotero
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-5" type="checkbox" id="nav-3-1-5">
    
    <label class="md-nav__link" for="nav-3-1-5">
      Pandoc
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Pandoc" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-5">
        <span class="md-nav__icon md-icon"></span>
        Pandoc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../pandoc/bibliography/" title="Bibliography" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pandoc/cite_filter/" title="Cite Filter" class="md-nav__link">
      Cite Filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pandoc/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pandoc/util/" title="Util" class="md-nav__link">
      Util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-6" type="checkbox" id="nav-3-1-6">
    
    <label class="md-nav__link" for="nav-3-1-6">
      Process
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Process" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-6">
        <span class="md-nav__icon md-icon"></span>
        Process
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/bibliography/" title="Bibliography" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/ci/" title="Ci" class="md-nav__link">
      Ci
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/manuscript/" title="Manuscript" class="md-nav__link">
      Manuscript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/process_command/" title="Process Command" class="md-nav__link">
      Process Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/requests_cache/" title="Requests Cache" class="md-nav__link">
      Requests Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/util/" title="Util" class="md-nav__link">
      Util
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-6-9" type="checkbox" id="nav-3-1-6-9">
    
    <label class="md-nav__link" for="nav-3-1-6-9">
      Tests
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tests" data-md-level="4">
      <label class="md-nav__title" for="nav-3-1-6-9">
        <span class="md-nav__icon md-icon"></span>
        Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/test_bibliography/" title="Test Bibliography" class="md-nav__link">
      Test Bibliography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/test_ci/" title="Test Ci" class="md-nav__link">
      Test Ci
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/test_metadata/" title="Test Metadata" class="md-nav__link">
      Test Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/test_process_command/" title="Test Process Command" class="md-nav__link">
      Test Process Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../process/tests/test_util/" title="Test Util" class="md-nav__link">
      Test Util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-7" type="checkbox" id="nav-3-1-7">
    
    <label class="md-nav__link" for="nav-3-1-7">
      Tests
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tests" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-7">
        <span class="md-nav__icon md-icon"></span>
        Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tests/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tests/test_command/" title="Test Command" class="md-nav__link">
      Test Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tests/test_imports/" title="Test Imports" class="md-nav__link">
      Test Imports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tests/test_readme/" title="Test Readme" class="md-nav__link">
      Test Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tests/test_util/" title="Test Util" class="md-nav__link">
      Test Util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-8" type="checkbox" id="nav-3-1-8">
    
    <label class="md-nav__link" for="nav-3-1-8">
      Webpage
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Webpage" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-8">
        <span class="md-nav__icon md-icon"></span>
        Webpage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../webpage/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../webpage/webpage_command/" title="Webpage Command" class="md-nav__link">
      Webpage Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_jsonschema_csl_validator" class="md-nav__link">
    get_jsonschema_csl_validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_jsonschema_errors" class="md-nav__link">
    remove_jsonschema_errors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/manubot/manubot/edit/master/reference/manubot/cite/citeproc.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="module-manubotciteciteproc">Module manubot.cite.citeproc</h1>
<p>Correct or validate CSL item schema.</p>
<p>Module naming: citeproc is the generic name for programs that produce
formatted bibliographies and citations based on the metadata of
the cited objects and the formatting instructions provided by
Citation Style Language (CSL) styles.
-- https://en.wikipedia.org/wiki/CiteProc</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="sd">&quot;&quot;&quot;Correct or validate CSL item schema.</span>

<span class="sd">Module naming: citeproc is the generic name for programs that produce</span>

<span class="sd">formatted bibliographies and citations based on the metadata of</span>

<span class="sd">the cited objects and the formatting instructions provided by</span>

<span class="sd">Citation Style Language (CSL) styles.</span>

<span class="sd">-- https://en.wikipedia.org/wiki/CiteProc</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">functools</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">manubot.util</span> <span class="kn">import</span> <span class="n">read_serialized_data</span>

<span class="nd">@functools.lru_cache</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_jsonschema_csl_validator</span><span class="p">():</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Return a jsonschema validator for the CSL Item JSON Schema</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">jsonschema</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/dhimmel/csl-schema/raw/manubot/csl-data.json&quot;</span>

    <span class="n">schema</span> <span class="o">=</span> <span class="n">read_serialized_data</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="n">Validator</span> <span class="o">=</span> <span class="n">jsonschema</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">validator_for</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

    <span class="n">Validator</span><span class="o">.</span><span class="n">check_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">remove_jsonschema_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">recurse_depth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Remove fields in CSL Items that produce JSON Schema errors. Should errors</span>

<span class="sd">    be removed, but the JSON instance still fails to validate, recursively call</span>

<span class="sd">    remove_jsonschema_errors until the instance validates or the recursion</span>

<span class="sd">    depth limit is reached.</span>

<span class="sd">    Note that this method may not be work for all types of JSON Schema errors</span>

<span class="sd">    and users looking to adapt it for other applications should write</span>

<span class="sd">    task-specific tests to provide empirical evaluate that it works as</span>

<span class="sd">    intended.</span>

<span class="sd">    The default in_place=False creates a deepcopy of instance before pruning it,</span>

<span class="sd">    such that a new dictionary is returned and instance is not edited.</span>

<span class="sd">    Set in_place=True to edit instance in-place. The inital implementation of</span>

<span class="sd">    remove_jsonschema_errors always deepcopied instance, and it is possible deepcopying</span>

<span class="sd">    is important to prevent malfunction when encountering certain edge cases.</span>

<span class="sd">    Please report if you observe any in_place dependent behaviors.</span>

<span class="sd">    See also:</span>

<span class="sd">    https://github.com/Julian/jsonschema/issues/448</span>

<span class="sd">    https://stackoverflow.com/questions/44694835</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">validator</span> <span class="o">=</span> <span class="n">get_jsonschema_csl_validator</span><span class="p">()</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">iter_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">in_place</span><span class="p">:</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>

        <span class="n">_remove_error</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">validator</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="ow">or</span> <span class="n">recurse_depth</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">return</span> <span class="n">remove_jsonschema_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">recurse_depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="n">in_place</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_delete_elem</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">absolute_path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Helper function for remove_jsonschema_errors that deletes an element in the</span>

<span class="sd">    JSON-like input instance at the specified path. absolute_path is relative</span>

<span class="sd">    to the original validated instance for logging purposes. Defaults to path,</span>

<span class="sd">    if not specified. message is an optional string with additional error</span>

<span class="sd">    information to log.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">absolute_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>

        <span class="n">absolute_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>

        <span class="p">(</span><span class="n">f</span><span class="s2">&quot;{message}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">message</span> <span class="k">else</span> <span class="n">message</span><span class="p">)</span>

        <span class="o">+</span> <span class="s2">&quot;_delete_elem deleting CSL element at: &quot;</span>

        <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">absolute_path</span><span class="p">))</span>

    <span class="p">)</span>

    <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">del</span> <span class="n">_deep_get</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">head</span><span class="p">)[</span><span class="n">tail</span><span class="p">]</span>

    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>

        <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_deep_get</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Descend path to return a deep element in the JSON object instance.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="n">instance</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">instance</span>

<span class="k">def</span> <span class="nf">_remove_error</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Remove a jsonschema ValidationError from the JSON-like instance.</span>

<span class="sd">    See ValidationError documentation at</span>

<span class="sd">    https://python-jsonschema.readthedocs.io/en/latest/errors/#jsonschema.exceptions.ValidationError</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">sub_errors</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">context</span>

    <span class="k">if</span> <span class="n">sub_errors</span><span class="p">:</span>

        <span class="c1"># already_removed_additional was neccessary to workaround</span>

        <span class="c1"># https://github.com/citation-style-language/schema/issues/154</span>

        <span class="n">already_removed_additional</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">for</span> <span class="n">sub_error</span> <span class="ow">in</span> <span class="n">sub_errors</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">sub_error</span><span class="o">.</span><span class="n">validator</span> <span class="o">==</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">already_removed_additional</span><span class="p">:</span>

                    <span class="k">continue</span>

                <span class="n">already_removed_additional</span> <span class="o">=</span> <span class="bp">True</span>

            <span class="n">sub_instance</span> <span class="o">=</span> <span class="n">_deep_get</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

            <span class="n">_remove_error</span><span class="p">(</span><span class="n">sub_instance</span><span class="p">,</span> <span class="n">sub_error</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">error</span><span class="o">.</span><span class="n">validator</span> <span class="o">==</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span>

        <span class="n">extras</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">instance</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">schema</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">])</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>

            <span class="n">error</span><span class="o">.</span><span class="n">message</span>

            <span class="o">+</span> <span class="n">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Will now remove these {len(extras)} additional properties.&quot;</span>

        <span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">extras</span><span class="p">:</span>

            <span class="n">_delete_elem</span><span class="p">(</span>

                <span class="n">instance</span><span class="o">=</span><span class="n">instance</span><span class="p">,</span>

                <span class="n">path</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">key</span><span class="p">],</span>

                <span class="n">absolute_path</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">absolute_path</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">key</span><span class="p">],</span>

            <span class="p">)</span>

    <span class="k">elif</span> <span class="n">error</span><span class="o">.</span><span class="n">validator</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;enum&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;minItems&quot;</span><span class="p">,</span> <span class="s2">&quot;maxItems&quot;</span><span class="p">}:</span>

        <span class="n">_delete_elem</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">absolute_path</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">error</span><span class="o">.</span><span class="n">validator</span> <span class="o">==</span> <span class="s2">&quot;required&quot;</span><span class="p">:</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>

            <span class="p">(</span><span class="n">f</span><span class="s2">&quot;{error.message}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">message</span> <span class="k">else</span> <span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

            <span class="o">+</span> <span class="s2">&quot;required element missing at: &quot;</span>

            <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">absolute_path</span><span class="p">))</span>

        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{error.validator} is not yet supported&quot;</span><span class="p">)</span>
</code></pre></div>

</details>
<h2 id="functions">Functions</h2>
<h3 id="get_jsonschema_csl_validator">get_jsonschema_csl_validator</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_jsonschema_csl_validator</span><span class="p">(</span>

<span class="p">)</span>
</code></pre></div>

<p>Return a jsonschema validator for the CSL Item JSON Schema</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="nd">@functools.lru_cache</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_jsonschema_csl_validator</span><span class="p">():</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Return a jsonschema validator for the CSL Item JSON Schema</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">jsonschema</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/dhimmel/csl-schema/raw/manubot/csl-data.json&quot;</span>

    <span class="n">schema</span> <span class="o">=</span> <span class="n">read_serialized_data</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="n">Validator</span> <span class="o">=</span> <span class="n">jsonschema</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">validator_for</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

    <span class="n">Validator</span><span class="o">.</span><span class="n">check_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="remove_jsonschema_errors">remove_jsonschema_errors</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_jsonschema_errors</span><span class="p">(</span>
    <span class="n">instance</span><span class="p">,</span>
    <span class="n">recurse_depth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">in_place</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>

<p>Remove fields in CSL Items that produce JSON Schema errors. Should errors
be removed, but the JSON instance still fails to validate, recursively call
remove_jsonschema_errors until the instance validates or the recursion
depth limit is reached.</p>
<p>Note that this method may not be work for all types of JSON Schema errors
and users looking to adapt it for other applications should write
task-specific tests to provide empirical evaluate that it works as
intended.</p>
<p>The default in_place=False creates a deepcopy of instance before pruning it,
such that a new dictionary is returned and instance is not edited.
Set in_place=True to edit instance in-place. The inital implementation of
remove_jsonschema_errors always deepcopied instance, and it is possible deepcopying
is important to prevent malfunction when encountering certain edge cases.
Please report if you observe any in_place dependent behaviors.</p>
<p>See also:
https://github.com/Julian/jsonschema/issues/448
https://stackoverflow.com/questions/44694835</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">remove_jsonschema_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">recurse_depth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="k">False</span><span class="p">):</span>

    <span class="ss">&quot;&quot;&quot;</span>

<span class="ss">    Remove fields in CSL Items that produce JSON Schema errors. Should errors</span>

<span class="ss">    be removed, but the JSON instance still fails to validate, recursively call</span>

<span class="ss">    remove_jsonschema_errors until the instance validates or the recursion</span>

<span class="ss">    depth limit is reached.</span>

<span class="ss">    Note that this method may not be work for all types of JSON Schema errors</span>

<span class="ss">    and users looking to adapt it for other applications should write</span>

<span class="ss">    task-specific tests to provide empirical evaluate that it works as</span>

<span class="ss">    intended.</span>

<span class="ss">    The default in_place=False creates a deepcopy of instance before pruning it,</span>

<span class="ss">    such that a new dictionary is returned and instance is not edited.</span>

<span class="ss">    Set in_place=True to edit instance in-place. The inital implementation of</span>

<span class="ss">    remove_jsonschema_errors always deepcopied instance, and it is possible deepcopying</span>

<span class="ss">    is important to prevent malfunction when encountering certain edge cases.</span>

<span class="ss">    Please report if you observe any in_place dependent behaviors.</span>

<span class="ss">    See also:</span>

<span class="ss">    https://github.com/Julian/jsonschema/issues/448</span>

<span class="ss">    https://stackoverflow.com/questions/44694835</span>

<span class="ss">    &quot;&quot;&quot;</span>

    <span class="k">validator</span> <span class="o">=</span> <span class="n">get_jsonschema_csl_validator</span><span class="p">()</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="k">validator</span><span class="p">.</span><span class="n">iter_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>

    <span class="k">if</span> <span class="k">not</span> <span class="n">in_place</span><span class="p">:</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="k">copy</span><span class="p">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="n">sorted</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="k">key</span><span class="o">=</span><span class="n">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="p">.</span><span class="n">path</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">error</span> <span class="k">in</span> <span class="n">errors</span><span class="p">:</span>

        <span class="n">_remove_error</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>

    <span class="k">if</span> <span class="k">validator</span><span class="p">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="k">or</span> <span class="n">recurse_depth</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">return</span> <span class="n">remove_jsonschema_errors</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">recurse_depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="n">in_place</span><span class="p">)</span>
</code></pre></div>

</details>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../citekey/" title="Citekey" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Citekey
              </span>
            </div>
          </a>
        
        
          <a href="../csl_item/" title="Csl Item" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Csl Item
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../../../../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../../..",
          features: [],
          search: Object.assign({
            worker: "../../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>